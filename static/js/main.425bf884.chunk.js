(this["webpackJsonpmy-app"]=this["webpackJsonpmy-app"]||[]).push([[0],{14:function(t,e,s){},15:function(t,e,s){},18:function(t,e,s){"use strict";s.r(e);var n=s(1),a=s.n(n),r=s(9),i=s.n(r),c=(s(14),s(2)),o=s(3),u=s(5),l=s(4),h=(s(15),s(0)),p=function(t){Object(u.a)(s,t);var e=Object(l.a)(s);function s(t){var n;return Object(c.a)(this,s),(n=e.call(this,t)).MAX_RESULTS_PER_PAGE=5,n.onSearchInputChange=function(t){n.setState({text:t.target.value})},n.onRangeInputChange=function(t){n.setState({numResults:parseInt(t.target.value)}),n.props.onRangeChange(t.target.value)},n.onButtonClick=function(t){n.props.onInputChange(n.state.text)},n.setDropdownOptions=function(){for(var t=[],e=1;e<=n.MAX_RESULTS_PER_PAGE;e++)t.push(Object(h.jsx)("option",{value:e,children:10*e}));return t},n.state={text:"What movie are you thinking of?",dropdownOptions:n.setDropdownOptions(),numResults:1},n}return Object(o.a)(s,[{key:"render",value:function(){return Object(h.jsxs)("div",{className:"inline-display",children:[Object(h.jsx)("input",{id:"search-bar",value:this.state.text,onChange:this.onSearchInputChange,type:"text"}),Object(h.jsx)("button",{className:"search-button",onClick:this.onButtonClick,children:"Search"}),Object(h.jsxs)("p",{children:["Results per page: ",Object(h.jsx)("select",{value:this.state.numResults,onChange:this.onRangeInputChange,children:this.state.dropdownOptions})]})]})}}]),s}(n.Component),b=s(6),d=s.n(b),j=s(7),f=function(t){Object(u.a)(s,t);var e=Object(l.a)(s);function s(t){var n;return Object(c.a)(this,s),(n=e.call(this,t)).canvas=void 0,n.state={movie:{Title:"Default",Released:"Default",Runtime:"Default",Genre:"Default",Director:"Default",Plot:"Default"},poster:null},n.canvas=a.a.createRef(),n}return Object(o.a)(s,[{key:"componentDidMount",value:function(){this.getTitleInformation()}},{key:"componentDidUpdate",value:function(t,e){this.props.title!==t.title&&this.getTitleInformation(),this.state.poster!==e.poster&&this.draw()}},{key:"getTitleInformation",value:function(){var t=Object(j.a)(d.a.mark((function t(){var e,s,n,a=this;return d.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,fetch("https://www.omdbapi.com/?t="+encodeURI(this.props.title)+"&plot=full&apikey=fa79688c");case 3:if((e=t.sent).ok){t.next=7;break}return alert("Bad status: "+e.status),t.abrupt("return");case 7:return t.next=9,e.json();case 9:if("False"!==(s=t.sent).Response){t.next=20;break}return t.next=13,fetch("https://www.omdbapi.com/?i="+encodeURI(this.props.id)+"&plot=full&apikey=fa79688c");case 13:if(n=t.sent,e.ok){t.next=17;break}return alert("Bad status: "+e.status),t.abrupt("return");case 17:return t.next=19,n.json();case 19:s=t.sent;case 20:this.setState({movie:s},(function(){a.fetchAndSaveImage()})),t.next=27;break;case 23:t.prev=23,t.t0=t.catch(0),alert("There was a problem connecting to the server."),console.log(t.t0);case 27:case"end":return t.stop()}}),t,this,[[0,23]])})));return function(){return t.apply(this,arguments)}}()},{key:"fetchAndSaveImage",value:function(){var t=this;if("N/A"!==this.state.movie.Poster){var e=new Image;e.onload=function(){t.setState({poster:e})},e.src=this.state.movie.Poster}else this.setState({poster:null})}},{key:"draw",value:function(){var t=this.canvas.current;if(null===t)throw Error("No canvas reference.");var e=t.getContext("2d");if(null===e)throw Error("Can't draw, no graphics context.");e.clearRect(0,0,t.width,t.height),null!==this.state.poster&&(t.width=this.state.poster.width,t.height=this.state.poster.height,e.drawImage(this.state.poster,0,0))}},{key:"render",value:function(){return Object(h.jsxs)("div",{id:"selection",children:[Object(h.jsx)("h1",{children:this.state.movie.Title}),Object(h.jsxs)("p",{children:[Object(h.jsx)("b",{children:"Release date: "}),this.state.movie.Released]}),Object(h.jsxs)("p",{children:[Object(h.jsx)("b",{children:"Runtime: "}),this.state.movie.Runtime]}),Object(h.jsxs)("p",{children:[Object(h.jsx)("b",{children:"Genre: "}),this.state.movie.Genre]}),Object(h.jsxs)("p",{children:[Object(h.jsx)("b",{children:"Director: "}),this.state.movie.Director]}),Object(h.jsx)("p",{children:this.state.movie.Plot}),Object(h.jsx)("canvas",{ref:this.canvas})]})}}]),s}(n.Component),m=function(t){Object(u.a)(s,t);var e=Object(l.a)(s);function s(t){var n;return Object(c.a)(this,s),(n=e.call(this,t)).onNextButtonClick=function(){if(Math.ceil(n.state.totalResults/(10*n.props.numResults)-1)>n.state.pageNumber){var t=n.state.pageNumber+1;n.setState({pageNumber:t})}},n.onPrevButtonClick=function(){if(n.state.pageNumber>0){var t=n.state.pageNumber-1;n.setState({pageNumber:t})}},n.onTitleButtonClick=function(t){n.setState({selectedTitle:t.currentTarget.innerText,selectedID:t.currentTarget.value})},n.state={results:[],totalResults:0,pageNumber:0,selectedTitle:"Iron Man",selectedID:"tt0371746"},n}return Object(o.a)(s,[{key:"componentDidMount",value:function(){this.getMovieData()}},{key:"componentDidUpdate",value:function(t,e){var s=this;this.props.title!==t.title||this.props.numResults!==t.numResults?this.setState({pageNumber:0},(function(){s.getMovieData()})):this.state.pageNumber!==e.pageNumber&&this.getMovieData()}},{key:"getMovieData",value:function(){var t=Object(j.a)(d.a.mark((function t(){var e,s,n,a,r,i,c,o=this;return d.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:t.prev=0,e=this.state.pageNumber*this.props.numResults+1,s=[],n=e;case 4:if(!(n<Number(e)+Number(this.props.numResults))){t.next=30;break}return console.log(n),t.next=8,fetch("https://www.omdbapi.com/?s="+encodeURI(this.props.title)+"&page="+n+"&apikey=fa79688c");case 8:if((a=t.sent).ok){t.next=12;break}return alert("Bad status: "+a.status),t.abrupt("return");case 12:return t.next=14,a.json();case 14:if("True"!==(r=t.sent).Response){t.next=24;break}if(i=r.Search,c=i.map((function(t){return Object(h.jsx)("li",{className:"title-button",children:Object(h.jsx)("button",{onClick:o.onTitleButtonClick,value:t.imdbID,children:Object(h.jsx)("b",{children:t.Title})},t.imdbID)})})),s=s.concat(c),this.setState({totalResults:r.totalResults}),!(10*(n+1)>r.totalResults)){t.next=22;break}return t.abrupt("break",30);case 22:t.next=27;break;case 24:return s=[Object(h.jsx)("li",{children:"I'm sorry, I couldn't find anything for that search."})],this.setState({totalResults:0}),t.abrupt("break",30);case 27:n++,t.next=4;break;case 30:this.setState({results:s}),t.next=37;break;case 33:t.prev=33,t.t0=t.catch(0),alert("There was a problem connecting with the server."),console.log(t.t0);case 37:case"end":return t.stop()}}),t,this,[[0,33]])})));return function(){return t.apply(this,arguments)}}()},{key:"render",value:function(){return Object(h.jsxs)("div",{className:"inline-display",children:[Object(h.jsxs)("div",{id:"titles-list",children:[Object(h.jsx)("ul",{className:"titles",children:this.state.results}),Object(h.jsxs)("div",{id:"pagination",children:[Object(h.jsx)("button",{className:"search-button",onClick:this.onPrevButtonClick,children:"Previous ten results"}),Object(h.jsx)("button",{className:"search-button",onClick:this.onNextButtonClick,children:"Next ten results"}),Object(h.jsxs)("p",{children:["Currently displaying results ",(this.state.pageNumber+1)*this.props.numResults*10-(10*this.props.numResults-1)," through ",Math.min((this.state.pageNumber+1)*this.props.numResults*10,this.state.totalResults)," of ",this.state.totalResults]})]})]}),Object(h.jsx)(f,{title:this.state.selectedTitle,id:this.state.selectedID})]})}}]),s}(n.Component),v=function(t){Object(u.a)(s,t);var e=Object(l.a)(s);function s(t){var n;return Object(c.a)(this,s),(n=e.call(this,t)).updateQuery=function(t){n.setState({query:t})},n.updateRange=function(t){n.setState({numResults:t})},n.state={query:"Iron Man",numResults:1},n}return Object(o.a)(s,[{key:"render",value:function(){return Object(h.jsxs)("div",{children:[Object(h.jsx)("h1",{id:"heading",children:"Movie Metadata"}),Object(h.jsx)(p,{onInputChange:this.updateQuery,onRangeChange:this.updateRange}),Object(h.jsx)(m,{title:this.state.query,numResults:this.state.numResults})]})}}]),s}(n.Component),g=function(t){t&&t instanceof Function&&s.e(3).then(s.bind(null,19)).then((function(e){var s=e.getCLS,n=e.getFID,a=e.getFCP,r=e.getLCP,i=e.getTTFB;s(t),n(t),a(t),r(t),i(t)}))};i.a.render(Object(h.jsx)(a.a.StrictMode,{children:Object(h.jsx)(v,{})}),document.getElementById("root")),g()}},[[18,1,2]]]);
//# sourceMappingURL=main.425bf884.chunk.js.map